ú)
OC:\Users\Leandro\ToDoList\ToDoListSQlite\Controllers\ToDoListModelController.cs
	namespace 	
ToDoListSQlite
 
. 
Controllers $
{		 
[

 
Route

 

(


 
$str

 
)

 
]

 
[ 
ApiController 
] 
public 

class #
ToDoListModelController (
:) *
ControllerBase+ 9
{ 
private 
readonly 
IToDoListService )
_service* 2
;2 3
public #
ToDoListModelController &
(& '
IToDoListService' 7
service8 ?
)? @
{ 	
_service 
= 
service 
; 
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
ActionResult &
<& '
IEnumerable' 2
<2 3
ToDoListModel3 @
>@ A
>A B
>B C
GetToDoListsD P
(P Q
)Q R
{ 	
return
 
await 
_service 
.  
GetToDoLists  ,
(, -
)- .
??/ 1
NotFound2 :
(: ;
); <
;< =
} 	
[ 	
HttpGet	 
( 
$str 
) 
] 
public 
async 
Task 
< 
ActionResult &
<& '
ToDoListModel' 4
>4 5
>5 6
GetToDoListModel7 G
(G H
longH L
idM O
)O P
{ 	
return
 
await 
_service 
.  
GetToDoListModel  0
(0 1
id1 3
)3 4
??5 7
NotFound8 @
(@ A
)A B
;B C
}   	
["" 	
HttpPut""	 
("" 
$str"" 
)"" 
]"" 
public## 
async## 
Task## 
<## 
IActionResult## '
>##' (
PutToDoListModel##) 9
(##9 :
long##: >
id##? A
,##A B
ToDoListModel##C P
toDoListModel##Q ^
)##^ _
{$$ 	
if&& 
(&& 
id&& 
!=&& 
toDoListModel&& #
.&&# $
Id&&$ &
)&&& '
{'' 
return(( 

BadRequest(( !
(((! "
)((" #
;((# $
})) 
var++ 
x++ 
=++ 
await++ 
_service++ "
.++" #
PutToDoListModel++# 3
(++3 4
id++4 6
,++6 7
toDoListModel++8 E
)++E F
;++F G
if-- 
(-- 
x-- 
.-- 
Value-- 
==-- 
null-- 
)--  
return.. 
NotFound.. 
(..  
)..  !
;..! "
else// 
return00 
	NoContent00 !
(00! "
)00" #
;00# $
}11 	
[33 	
HttpPost33	 
]33 
public44 
async44 
Task44 
<44 
ActionResult44 &
<44& '
ToDoListModel44' 4
>444 5
>445 6
PostToDoListModel447 H
(44H I
ToDoListModel44I V
toDoListModel44W d
)44d e
{55 	
try66 
{77 
var88 
tag88 
=88 
await88 
_service88  (
.88( )
PostToDoListModel88) :
(88: ;
toDoListModel88; H
)88H I
;88I J
return:: 
CreatedAtAction:: &
(::& '
$str::' 9
,::9 :
new::; >
{::? @
id::A C
=::D E
toDoListModel::F S
.::S T
Id::T V
}::W X
,::X Y
toDoListModel::Z g
)::g h
;::h i
};; 
catch<< 
(<< 
	Exception<< 
ex<< 
)<<  
{== 
return>> 

BadRequest>> !
(>>! "
new>>" %
{>>& '
Message>>( /
=>>0 1
ex>>2 4
.>>4 5
Message>>5 <
}>>= >
)>>> ?
;>>? @
}?? 
}@@ 	
[CC 	

HttpDeleteCC	 
(CC 
$strCC 
)CC 
]CC 
publicDD 
asyncDD 
TaskDD 
<DD 
ActionResultDD &
>DD& '
DeleteToDoListModelDD( ;
(DD; <
longDD< @
idDDA C
)DDC D
{EE 	
varFF 
xFF 
=FF 
awaitFF 
_serviceFF "
.FF" #
DeleteToDoListModelFF# 6
(FF6 7
idFF7 9
)FF9 :
;FF: ;
ifHH 
(HH 
xHH 
==HH 
nullHH 
)HH 
returnII 
NotFoundII 
(II  
)II  !
;II! "
elseJJ 
returnKK 
	NoContentKK  
(KK  !
)KK! "
;KK" #
}LL 	
}MM 
}NN ™
@C:\Users\Leandro\ToDoList\ToDoListSQlite\Data\ToDoListContext.cs
	namespace 	
ToDoList
 
. 
Data 
; 
public 
partial 
class 
ToDoListContext $
:% &
	DbContext' 0
{		 
public

 

ToDoListContext

 
(

 
DbContextOptions

 +
<

+ ,
ToDoListContext

, ;
>

; <
options

= D
)

D E
: 	
base
 
( 
options 
) 
{ 
} 
public 

virtual 
DbSet 
< 
ToDoListModel &
>& '
	ToDoLists( 1
{2 3
get4 7
;7 8
set9 <
;< =
}> ?
	protected 
override 
void 
OnModelCreating +
(+ ,
ModelBuilder, 8
modelBuilder9 E
)E F
{ 
modelBuilder 
. 
Entity 
< 
ToDoListModel )
>) *
(* +
entity+ 1
=>2 4
{ 	
entity 
. 
ToTable 
( 
$str %
)% &
;& '
entity 
. 
Property 
( 
e 
=>  
e! "
." #
Id# %
)% &
.& '
HasColumnName' 4
(4 5
$str5 9
)9 :
;: ;
} 	
)	 

;
 "
OnModelCreatingPartial 
( 
modelBuilder +
)+ ,
;, -
} 
partial 
void "
OnModelCreatingPartial '
(' (
ModelBuilder( 4
modelBuilder5 A
)A B
;B C
} ¤

>C:\Users\Leandro\ToDoList\ToDoListSQlite\Models\ToDoListDTO.cs
	namespace 	
ToDoList
 
. 
Models 
{ 
public 

class 
ToDoListDTO 
{ 
public 
string 
id 
{ 
get 
; 
set  #
;# $
}% &
=' (
string) /
./ 0
Empty0 5
;5 6
public

 
string

 
Title

 
{

 
get

 !
;

! "
set

# &
;

& '
}

( )
=

* +
string

, 2
.

2 3
Empty

3 8
;

8 9
public 
string 
Description !
{" #
get$ '
;' (
set) ,
;, -
}. /
=0 1
string2 8
.8 9
Empty9 >
;> ?
public 
string 
? 
addedOn 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
? 
dueDate 
{  
get! $
;$ %
set& )
;) *
}+ ,
} 
} Ì
@C:\Users\Leandro\ToDoList\ToDoListSQlite\Models\ToDoListModel.cs
	namespace 	
ToDoList
 
. 
Models 
; 
public 
partial 
class 
ToDoListModel "
{ 
public 

long 
Id 
{ 
get 
; 
set 
; 
}  
public

 

string

 
?

 
Title

 
{

 
get

 
;

 
set

  #
;

# $
}

% &
public 

string 
? 
Description 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 

string 
? 
AddedOn 
{ 
get  
;  !
set" %
;% &
}' (
public 

string 
? 
DueDate 
{ 
get  
;  !
set" %
;% &
}' (
} ²
3C:\Users\Leandro\ToDoList\ToDoListSQlite\Program.cs
var 
builder 
= 
WebApplication 
. 
CreateBuilder *
(* +
args+ /
)/ 0
;0 1
builder		 
.		 
Services		 
.		 
AddControllers		 
(		  
)		  !
;		! "
builder 
. 
Services 
. #
AddEndpointsApiExplorer (
(( )
)) *
;* +
builder 
. 
Services 
. 
AddSwaggerGen 
( 
)  
;  !
builder 
. 
Services 
. 
AddDbContext 
< 
ToDoListContext -
>- .
(. /
options/ 6
=>7 9
options: A
.A B
	UseSqliteB K
(K L
$strL ]
)] ^
)^ _
;_ `
builder 
. 
Services 
. 
AddTransient 
< 
IToDoListService .
,. /
ToDoListService0 ?
>? @
(@ A
)A B
;B C
var 
app 
= 	
builder
 
. 
Build 
( 
) 
; 
if 
( 
app 
. 
Environment 
. 
IsDevelopment !
(! "
)" #
)# $
{ 
app 
. 

UseSwagger 
( 
) 
; 
app 
. 
UseSwaggerUI 
( 
) 
; 
} 
app 
. 
UseHttpsRedirection 
( 
) 
; 
app 
. 
UseAuthorization 
( 
) 
; 
app 
. 
MapControllers 
( 
) 
; 
app   
.   
Run   
(   
)   	
;  	 
î
PC:\Users\Leandro\ToDoList\ToDoListSQlite\Services\Interfaces\IToDoListService.cs
	namespace 	
ToDoListSQlite
 
. 
Services !
.! "

Interfaces" ,
{ 
public 

	interface 
IToDoListService %
{ 
Task		 
<		 
ActionResult		 
<		 
IEnumerable		 %
<		% &
ToDoListModel		& 3
>		3 4
>		4 5
>		5 6
GetToDoLists		7 C
(		C D
)		D E
;		E F
Task 
< 
ActionResult 
< 
ToDoListModel '
>' (
>( )
GetToDoListModel* :
(: ;
long; ?
id@ B
)B C
;C D
Task 
< 
ActionResult 
< 
ToDoListModel '
>' (
>( )
PutToDoListModel* :
(: ;
long; ?
id@ B
,B C
ToDoListModelD Q
toDoListModelR _
)_ `
;` a
Task 
< 
ActionResult 
< 
ToDoListModel '
>' (
>( )
PostToDoListModel* ;
(; <
ToDoListModel< I
toDoListModelJ W
)W X
;X Y
Task 
< 
ActionResult 
< 
ToDoListModel '
>' (
>( )
DeleteToDoListModel* =
(= >
long> B
idC E
)E F
;F G
} 
} ‚,
OC:\Users\Leandro\ToDoList\ToDoListSQlite\Services\Interfaces\ToDoListService.cs
	namespace 	
ToDoListSQlite
 
. 
Services !
.! "

Interfaces" ,
{ 
public		 

class		 
ToDoListService		  
:		! "
IToDoListService		# 3
{

 
private 
readonly 
ToDoListContext (
_context) 1
;1 2
public 
ToDoListService 
( 
ToDoListContext .
context/ 6
)6 7
{ 	
_context 
= 
context 
; 
} 	
public 
async 
Task 
< 
ActionResult &
<& '
ToDoListModel' 4
>4 5
?5 6
>6 7
DeleteToDoListModel8 K
(K L
longL P
idQ S
)S T
{ 	
if 
( 
_context 
. 
	ToDoLists "
==# %
null& *
)* +
{ 
return 
null 
; 
} 
var 
toDoListModel 
= 
await  %
_context& .
.. /
	ToDoLists/ 8
.8 9
	FindAsync9 B
(B C
idC E
)E F
;F G
if 
( 
toDoListModel 
==  
null! %
)% &
{ 
return 
null 
; 
} 
_context 
. 
	ToDoLists 
. 
Remove %
(% &
toDoListModel& 3
)3 4
;4 5
await   
_context   
.   
SaveChangesAsync   +
(  + ,
)  , -
;  - .
return"" 
toDoListModel""  
;""  !
}## 	
public%% 
async%% 
Task%% 
<%% 
ActionResult%% &
<%%& '
ToDoListModel%%' 4
>%%4 5
>%%5 6
GetToDoListModel%%7 G
(%%G H
long%%H L
id%%M O
)%%O P
{&& 	
var(( 
toDoListModel(( 
=(( 
await((  %
_context((& .
.((. /
	ToDoLists((/ 8
.((8 9
	FindAsync((9 B
(((B C
id((C E
)((E F
;((F G
return** 
toDoListModel**  
;**  !
}++ 	
public-- 
async-- 
Task-- 
<-- 
ActionResult-- &
<--& '
IEnumerable--' 2
<--2 3
ToDoListModel--3 @
>--@ A
>--A B
>--B C
GetToDoLists--D P
(--P Q
)--Q R
{.. 	
return// 
await// 
_context// !
.//! "
	ToDoLists//" +
.//+ ,
ToListAsync//, 7
(//7 8
)//8 9
;//9 :
}00 	
public22 
async22 
Task22 
<22 
ActionResult22 &
<22& '
ToDoListModel22' 4
>224 5
>225 6
PostToDoListModel227 H
(22H I
ToDoListModel22I V
toDoListModel22W d
)22d e
{33 	
_context55 
.55 
	ToDoLists55 
.55 
Add55 "
(55" #
toDoListModel55# 0
)550 1
;551 2
await66 
_context66 
.66 
SaveChangesAsync66 +
(66+ ,
)66, -
;66- .
return88 
toDoListModel88  
;88  !
}99 	
public;; 
async;; 
Task;; 
<;; 
ActionResult;; &
<;;& '
ToDoListModel;;' 4
>;;4 5
?;;5 6
>;;6 7
PutToDoListModel;;8 H
(;;H I
long;;I M
id;;N P
,;;P Q
ToDoListModel;;R _
toDoListModel;;` m
);;m n
{<< 	
_context>> 
.>> 
Entry>> 
(>> 
toDoListModel>> (
)>>( )
.>>) *
State>>* /
=>>0 1
EntityState>>2 =
.>>= >
Modified>>> F
;>>F G
try@@ 
{AA 
awaitBB 
_contextBB 
.BB 
SaveChangesAsyncBB /
(BB/ 0
)BB0 1
;BB1 2
}CC 
catchDD 
(DD (
DbUpdateConcurrencyExceptionDD /
)DD/ 0
{EE 
ifFF 
(FF 
!FF 
ToDoListModelExistsFF (
(FF( )
idFF) +
)FF+ ,
)FF, -
{GG 
returnHH 
nullHH 
;HH  
}II 
elseJJ 
{KK 
throwLL 
;LL 
}MM 
}NN 
returnPP 
toDoListModelPP  
;PP  !
}QQ 	
privateSS 
boolSS 
ToDoListModelExistsSS (
(SS( )
longSS) -
idSS. 0
)SS0 1
{TT 	
returnUU 
(UU 
_contextUU 
.UU 
	ToDoListsUU &
?UU& '
.UU' (
AnyUU( +
(UU+ ,
eUU, -
=>UU. 0
eUU1 2
.UU2 3
IdUU3 5
==UU6 8
idUU9 ;
)UU; <
)UU< =
.UU= >
GetValueOrDefaultUU> O
(UUO P
)UUP Q
;UUQ R
}VV 	
}WW 
}XX 